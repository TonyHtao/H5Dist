import{V as ae,c,k as Qe,d as Ge,am as Je,y as Ze,Q as ne,l as se,s as le,x as qe,v as F,F as _e,a as E,o as p,e as f,L as ie,b as L,n as v,u as o,r as G,g as I,w as H,h as A,A as Ie,K as re,ab as ue,t as J,j as Ce,m as Ne}from"./index-DtZcYc45.js";import{I as ze,bi as et,b as tt,U as Z,R as ot,d as k,ba as at,i as de,as as nt,al as st,bj as lt,_ as it,l as Pe,B as rt,V as ut,aU as dt,S as pt,T as ct,aV as ft,bk as mt,bl as vt,ak as yt,J as bt,aT as ht,E as j,j as gt,Q as pe,K as ke,X as Me,w as wt}from"./el-scrollbar-5JrKAg7m.js";let b;const xt={height:"0",visibility:"hidden",overflow:et()?"":"hidden",position:"absolute","z-index":"-1000",top:"0",right:"0"},St=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing","word-break"],Ve=n=>{const r=Number.parseFloat(n);return Number.isNaN(r)?n:r};function Et(n){const r=window.getComputedStyle(n),w=r.getPropertyValue("box-sizing"),t=Number.parseFloat(r.getPropertyValue("padding-bottom"))+Number.parseFloat(r.getPropertyValue("padding-top")),i=Number.parseFloat(r.getPropertyValue("border-bottom-width"))+Number.parseFloat(r.getPropertyValue("border-top-width"));return{contextStyle:St.map(d=>[d,r.getPropertyValue(d)]),paddingSize:t,borderSize:i,boxSizing:w}}function Te(n,r=1,w){var t,i;b||(b=document.createElement("textarea"),((t=n.parentNode)!=null?t:document.body).appendChild(b));const{paddingSize:u,borderSize:d,boxSizing:m,contextStyle:x}=Et(n);x.forEach(([y,O])=>b==null?void 0:b.style.setProperty(y,O)),Object.entries(xt).forEach(([y,O])=>b==null?void 0:b.style.setProperty(y,O,"important")),b.value=n.value||n.placeholder||"";let h=b.scrollHeight;const C={};m==="border-box"?h=h+d:m==="content-box"&&(h=h-u),b.value="";const g=b.scrollHeight-u;if(ze(r)){let y=g*r;m==="border-box"&&(y=y+u+d),h=Math.max(y,h),C.minHeight=`${y}px`}if(ze(w)){let y=g*w;m==="border-box"&&(y=y+u+d),h=Math.min(y,h)}return C.height=`${h}px`,(i=b.parentNode)==null||i.removeChild(b),b=void 0,C}const It=tt({id:{type:String,default:void 0},size:st,disabled:{type:Boolean,default:void 0},modelValue:{type:k([String,Number,Object]),default:""},modelModifiers:{type:k(Object),default:()=>({})},maxlength:{type:[String,Number]},minlength:{type:[String,Number]},type:{type:k(String),default:"text"},resize:{type:String,values:["none","both","horizontal","vertical"]},autosize:{type:k([Boolean,Object]),default:!1},autocomplete:{type:k(String),default:"off"},formatter:{type:Function},parser:{type:Function},placeholder:{type:String},form:{type:String},readonly:Boolean,clearable:Boolean,clearIcon:{type:de,default:nt},showPassword:Boolean,showWordLimit:Boolean,wordLimitPosition:{type:String,values:["inside","outside"],default:"inside"},suffixIcon:{type:de},prefixIcon:{type:de},containerRole:{type:String,default:void 0},tabindex:{type:[String,Number],default:0},validateEvent:{type:Boolean,default:!0},inputStyle:{type:k([Object,Array,String]),default:()=>at({})},autofocus:Boolean,rows:{type:Number,default:2},...ot(["ariaLabel"]),inputmode:{type:k(String),default:void 0},name:String}),Ct={[Z]:n=>ae(n),input:n=>ae(n),change:(n,r)=>ae(n)&&(r instanceof Event||r===void 0),focus:n=>n instanceof FocusEvent,blur:n=>n instanceof FocusEvent,clear:()=>!0,mouseleave:n=>n instanceof MouseEvent,mouseenter:n=>n instanceof MouseEvent,keydown:n=>n instanceof Event,compositionstart:n=>n instanceof CompositionEvent,compositionupdate:n=>n instanceof CompositionEvent,compositionend:n=>n instanceof CompositionEvent},Nt=["class","style"],zt=/^on[A-Z]/,Pt=(n={})=>{const{excludeListeners:r=!1,excludeKeys:w}=n,t=c(()=>((w==null?void 0:w.value)||[]).concat(Nt)),i=Qe();return i?c(()=>{var u;return lt(Object.entries((u=i.proxy)==null?void 0:u.$attrs).filter(([d])=>!t.value.includes(d)&&!(r&&zt.test(d))))}):c(()=>({}))};function kt(n){let r;function w(){if(n.value==null)return;const{selectionStart:i,selectionEnd:u,value:d}=n.value;if(i==null||u==null)return;const m=d.slice(0,Math.max(0,i)),x=d.slice(Math.max(0,u));r={selectionStart:i,selectionEnd:u,value:d,beforeTxt:m,afterTxt:x}}function t(){if(n.value==null||r==null)return;const{value:i}=n.value,{beforeTxt:u,afterTxt:d,selectionStart:m}=r;if(u==null||d==null||m==null)return;let x=i.length;if(i.endsWith(d))x=i.length-d.length;else if(i.startsWith(u))x=u.length;else{const h=u[m-1],C=i.indexOf(h,m-1);C!==-1&&(x=C+1)}n.value.setSelectionRange(x,x)}return[w,t]}const Mt=["id","name","minlength","maxlength","type","disabled","readonly","autocomplete","tabindex","aria-label","placeholder","form","autofocus","role","inputmode"],Vt=["id","name","minlength","maxlength","tabindex","disabled","readonly","autocomplete","aria-label","placeholder","form","autofocus","rows","role"],Tt="ElInput",Ft=Ge({name:Tt,inheritAttrs:!1,__name:"input",props:It,emits:Ct,setup(n,{expose:r,emit:w}){const t=n,i=w,u=Je(),d=Pt(),m=Ze(),x=c(()=>[t.type==="textarea"?ce.b():s.b(),s.m(O.value),s.is("disabled",z.value),s.is("exceed",Re.value),{[s.b("group")]:m.prepend||m.append,[s.m("prefix")]:m.prefix||t.prefixIcon,[s.m("suffix")]:m.suffix||t.suffixIcon||t.clearable||t.showPassword,[s.bm("suffix","password-clear")]:W.value&&ee.value,[s.b("hidden")]:t.type==="hidden"},u.class]),h=c(()=>[s.e("wrapper"),s.is("focus",_.value)]),{form:C,formItem:g}=pt(),{inputId:y}=ct(t,{formItemContext:g}),O=rt(),z=ut(),s=Pe("input"),ce=Pe("textarea"),D=ne(),N=ne(),q=se(!1),K=se(!1),fe=se(),U=ne(t.inputStyle),S=c(()=>D.value||N.value),{wrapperRef:Fe,isFocused:_,handleFocus:me,handleBlur:ve}=dt(S,{disabled:z,afterBlur(){var e;t.validateEvent&&((e=g==null?void 0:g.validate)==null||e.call(g,"blur").catch(a=>Me()))}}),ye=c(()=>{var e;return(e=C==null?void 0:C.statusIcon)!=null?e:!1}),R=c(()=>(g==null?void 0:g.validateState)||""),be=c(()=>R.value&&ft[R.value]),Le=c(()=>K.value?mt:vt),Oe=c(()=>[u.style]),he=c(()=>[t.inputStyle,U.value,{resize:t.resize}]),P=c(()=>yt(t.modelValue)?"":String(t.modelValue)),W=c(()=>t.clearable&&!z.value&&!t.readonly&&!!P.value&&(_.value||q.value)),ee=c(()=>t.showPassword&&!z.value&&!!P.value),M=c(()=>t.showWordLimit&&!!t.maxlength&&(t.type==="text"||t.type==="textarea")&&!z.value&&!t.readonly&&!t.showPassword),te=c(()=>P.value.length),Re=c(()=>!!M.value&&te.value>Number(t.maxlength)),Be=c(()=>!!m.suffix||!!t.suffixIcon||W.value||t.showPassword||M.value||!!R.value&&ye.value),$e=c(()=>!!Object.keys(t.modelModifiers).length),[He,Ae]=kt(D);bt(N,e=>{if(je(),!M.value||t.resize!=="both"&&t.resize!=="horizontal")return;const a=e[0],{width:l}=a.contentRect;fe.value={right:`calc(100% - ${l+22-10}px)`}});const B=()=>{const{type:e,autosize:a}=t;if(!(!gt||e!=="textarea"||!N.value))if(a){const l=Ne(a)?a.minRows:void 0,T=Ne(a)?a.maxRows:void 0,$=Te(N.value,l,T);U.value={overflowY:"hidden",...$},F(()=>{N.value.offsetHeight,U.value=$})}else U.value={minHeight:Te(N.value).minHeight}},je=(e=>{let a=!1;return()=>{var l;if(a||!t.autosize)return;((l=N.value)==null?void 0:l.offsetParent)===null||(setTimeout(e),a=!0)}})(B),V=()=>{const e=S.value,a=t.formatter?t.formatter(P.value):P.value;!e||e.value===a||t.type==="file"||(e.value=a)},ge=e=>{const{trim:a,number:l}=t.modelModifiers;return a&&(e=e.trim()),l&&(e=`${Ve(e)}`),t.formatter&&t.parser&&(e=t.parser(e)),e},oe=async e=>{if(xe.value)return;const{lazy:a}=t.modelModifiers;let{value:l}=e.target;if(a){i(pe,l);return}if(l=ge(l),String(l)===P.value){t.formatter&&V();return}He(),i(Z,l),i(pe,l),await F(),(t.formatter&&t.parser||!$e.value)&&V(),Ae()},we=async e=>{let{value:a}=e.target;a=ge(a),t.modelModifiers.lazy&&i(Z,a),i(ke,a,e),await F(),V()},{isComposing:xe,handleCompositionStart:X,handleCompositionUpdate:Y,handleCompositionEnd:Q}=ht({emit:i,afterComposition:oe}),De=()=>{K.value=!K.value},Ke=()=>{var e;return(e=S.value)==null?void 0:e.focus()},Ue=()=>{var e;return(e=S.value)==null?void 0:e.blur()},We=e=>{q.value=!1,i("mouseleave",e)},Xe=e=>{q.value=!0,i("mouseenter",e)},Se=e=>{i("keydown",e)},Ye=()=>{var e;(e=S.value)==null||e.select()},Ee=()=>{i(Z,""),i(ke,""),i("clear"),i(pe,"")};return le(()=>t.modelValue,()=>{var e;F(()=>B()),t.validateEvent&&((e=g==null?void 0:g.validate)==null||e.call(g,"change").catch(a=>Me()))}),le(P,e=>{if(!S.value)return;const{trim:a,number:l}=t.modelModifiers,T=S.value.value,$=(l||t.type==="number")&&!/^0\d/.test(T)?`${Ve(T)}`:T;$!==e&&(document.activeElement===S.value&&S.value.type!=="range"&&a&&$.trim()===e||V())}),le(()=>t.type,async()=>{await F(),V(),B()}),qe(()=>{!t.formatter&&t.parser,V(),F(B)}),r({input:D,textarea:N,ref:S,textareaStyle:he,autosize:_e(t,"autosize"),isComposing:xe,focus:Ke,blur:Ue,select:Ye,clear:Ee,resizeTextarea:B}),(e,a)=>(p(),E("div",{class:v([x.value,{[o(s).bm("group","append")]:e.$slots.append,[o(s).bm("group","prepend")]:e.$slots.prepend}]),style:Ce(Oe.value),onMouseenter:Xe,onMouseleave:We},[f(" input "),e.type!=="textarea"?(p(),E(ie,{key:0},[f(" prepend slot "),e.$slots.prepend?(p(),E("div",{key:0,class:v(o(s).be("group","prepend"))},[G(e.$slots,"prepend")],2)):f("v-if",!0),L("div",{ref_key:"wrapperRef",ref:Fe,class:v(h.value)},[f(" prefix slot "),e.$slots.prefix||e.prefixIcon?(p(),E("span",{key:0,class:v(o(s).e("prefix"))},[L("span",{class:v(o(s).e("prefix-inner"))},[G(e.$slots,"prefix"),e.prefixIcon?(p(),I(o(j),{key:0,class:v(o(s).e("icon"))},{default:H(()=>[(p(),I(A(e.prefixIcon)))]),_:1},8,["class"])):f("v-if",!0)],2)],2)):f("v-if",!0),L("input",Ie({id:o(y),ref_key:"input",ref:D,class:o(s).e("inner")},o(d),{name:e.name,minlength:e.minlength,maxlength:e.maxlength,type:e.showPassword?K.value?"text":"password":e.type,disabled:o(z),readonly:e.readonly,autocomplete:e.autocomplete,tabindex:e.tabindex,"aria-label":e.ariaLabel,placeholder:e.placeholder,style:e.inputStyle,form:e.form,autofocus:e.autofocus,role:e.containerRole,inputmode:e.inputmode,onCompositionstart:a[0]||(a[0]=(...l)=>o(X)&&o(X)(...l)),onCompositionupdate:a[1]||(a[1]=(...l)=>o(Y)&&o(Y)(...l)),onCompositionend:a[2]||(a[2]=(...l)=>o(Q)&&o(Q)(...l)),onInput:oe,onChange:we,onKeydown:Se}),null,16,Mt),f(" suffix slot "),Be.value?(p(),E("span",{key:1,class:v(o(s).e("suffix"))},[L("span",{class:v(o(s).e("suffix-inner"))},[!W.value||!ee.value||!M.value?(p(),E(ie,{key:0},[G(e.$slots,"suffix"),e.suffixIcon?(p(),I(o(j),{key:0,class:v(o(s).e("icon"))},{default:H(()=>[(p(),I(A(e.suffixIcon)))]),_:1},8,["class"])):f("v-if",!0)],64)):f("v-if",!0),W.value?(p(),I(o(j),{key:1,class:v([o(s).e("icon"),o(s).e("clear")]),onMousedown:re(o(ue),["prevent"]),onClick:Ee},{default:H(()=>[(p(),I(A(e.clearIcon)))]),_:1},8,["class","onMousedown"])):f("v-if",!0),ee.value?(p(),I(o(j),{key:2,class:v([o(s).e("icon"),o(s).e("password")]),onClick:De,onMousedown:re(o(ue),["prevent"]),onMouseup:re(o(ue),["prevent"])},{default:H(()=>[(p(),I(A(Le.value)))]),_:1},8,["class","onMousedown","onMouseup"])):f("v-if",!0),M.value?(p(),E("span",{key:3,class:v([o(s).e("count"),o(s).is("outside",e.wordLimitPosition==="outside")])},[L("span",{class:v(o(s).e("count-inner"))},J(te.value)+" / "+J(e.maxlength),3)],2)):f("v-if",!0),R.value&&be.value&&ye.value?(p(),I(o(j),{key:4,class:v([o(s).e("icon"),o(s).e("validateIcon"),o(s).is("loading",R.value==="validating")])},{default:H(()=>[(p(),I(A(be.value)))]),_:1},8,["class"])):f("v-if",!0)],2)],2)):f("v-if",!0)],2),f(" append slot "),e.$slots.append?(p(),E("div",{key:1,class:v(o(s).be("group","append"))},[G(e.$slots,"append")],2)):f("v-if",!0)],64)):(p(),E(ie,{key:1},[f(" textarea "),L("textarea",Ie({id:o(y),ref_key:"textarea",ref:N,class:[o(ce).e("inner"),o(s).is("focus",o(_))]},o(d),{name:e.name,minlength:e.minlength,maxlength:e.maxlength,tabindex:e.tabindex,disabled:o(z),readonly:e.readonly,autocomplete:e.autocomplete,style:he.value,"aria-label":e.ariaLabel,placeholder:e.placeholder,form:e.form,autofocus:e.autofocus,rows:e.rows,role:e.containerRole,onCompositionstart:a[3]||(a[3]=(...l)=>o(X)&&o(X)(...l)),onCompositionupdate:a[4]||(a[4]=(...l)=>o(Y)&&o(Y)(...l)),onCompositionend:a[5]||(a[5]=(...l)=>o(Q)&&o(Q)(...l)),onInput:oe,onFocus:a[6]||(a[6]=(...l)=>o(me)&&o(me)(...l)),onBlur:a[7]||(a[7]=(...l)=>o(ve)&&o(ve)(...l)),onChange:we,onKeydown:Se}),null,16,Vt),M.value?(p(),E("span",{key:0,style:Ce(fe.value),class:v([o(s).e("count"),o(s).is("outside",e.wordLimitPosition==="outside")])},J(te.value)+" / "+J(e.maxlength),7)):f("v-if",!0)],64))],38))}});var Lt=it(Ft,[["__file","/home/runner/work/element-plus/element-plus/packages/components/input/src/input.vue"]]);const $t=wt(Lt);export{$t as E};
