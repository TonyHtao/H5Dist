import{E as H,A as J,M as K,P as Q}from"./el-scrollbar-DjDiXnij.js";import{E as X,a as Y}from"./el-checkbox-BBkTIl1Z.js";/* empty css                          */import{E as Z}from"./el-empty-B4IfwQu7.js";import{E as ee,a as te,b as le}from"./el-select-DwoIzWDU.js";import{_ as N,a as _,o as n,b as t,t as g,l as u,x as ae,u as A,O as se,f as i,w as d,e as S,L as f,W as V,g as y,N as ne}from"./index-ggbH2lsr.js";import{a as j}from"./request-h65uDk9c.js";import"./castArray-CfsqMx92.js";import"./toNumber-CvBd6tiI.js";import"./vnode-ByA7IYkb.js";const oe={class:"result-box"},ue={class:"result-left"},ie={class:"name"},re={class:"bottom"},de={class:"left"},ce={class:"right"},_e={__name:"result_item",props:{item:{type:Object,default:()=>({})}},setup(p){return(b,h)=>(n(),_("div",oe,[t("div",ue,[t("p",ie,g(p.item.company_name),1),t("div",re,[t("div",de,[t("p",null,"国家: "+g(p.item.country_area),1)]),t("div",ce,[t("p",null," 类目："+g(p.item.category_name),1)])])]),h[0]||(h[0]=t("div",{class:"result-right"},null,-1))]))}},pe=N(_e,[["__scopeId","data-v-bd8f8878"]]),ve=()=>j({url:"xkx/get_ft_industry_list",method:"get"}),he=()=>j({url:"xkx/get_ft_country_area_list",method:"get"}),me=p=>j({url:"xkx/get_ft_buyer_list",method:"get",params:p}),fe={class:"head-box"},ye={class:"content w"},ge={class:"breadcrumb"},be={class:"icon"},xe={class:"serach-box"},ke={class:"serach-result"},Ce={class:"result-box w"},Ve={class:"result-header"},Ee={class:"left"},we={style:{height:"calc(100vh - 400px)"}},$e={style:{height:"50px"}},Ie={key:0,style:{display:"flex","justify-content":"center","align-items":"center",height:"100%"}},Le={key:1,style:{display:"flex","justify-content":"center","align-items":"center",height:"100%"}},Ae={__name:"index",setup(p){const b=u([]),h=u([]),E=u([]),r=u([]),x=u({page:0,limit:10}),c=u({loading:!1,finished:!1}),O=async()=>{const e=(await ve()).data;h.value=e.map(a=>({value:a.id,label:`${a.cn_name} (${a.name})`}))},B=(s,e)=>s.filter(a=>a.label.includes(e)),D=s=>{if(s)return b.value.map(e=>(e.options=B(e.options,s),e))},G=async()=>{const e=(await he()).data,a=[];e.forEach(o=>{const m=o.cn_pinyin.charAt(0);if(a.findIndex(v=>v.label===m)===-1)a.push({label:m,options:[{value:o.key,label:`${o.cn_name} (${o.name})`}]});else{const v=a.findIndex(C=>C.label===m);a[v].options.push({value:o.key,label:`${o.cn_name} (${o.name})`})}}),b.value=a};ae(()=>{O(),G()});const w=u(""),$=u(!1),I=u(!1),M=se(),k=u([]),U=async s=>{},z=s=>{const e=s.length;$.value=e===r.value.length,I.value=e>0&&e<r.value.length},R=s=>{k.value=s?r.value.map(e=>e.id):[],I.value=!1},F=async(s=x.value)=>{c.value.loading=!0;try{const a=(await me({...s,country_keys:w.value,industry_ids:E.value.join(",")})).data;return a.length===0&&(c.value.finished=!0),a}finally{c.value.loading=!1}},P=async()=>{c.value.finished=!1,x.value.page=0,r.value=[];const s=await F();for(r.value.push(...s);;){await new Promise(a=>setTimeout(a,800)),x.value.page++;const e=await F(x.value);if(e.length===0)break;r.value.push(...e)}};return(s,e)=>{const a=H,o=le,m=te,v=ee,C=X,T=Z,q=Y,W=J;return n(),_(f,null,[t("div",fe,[t("div",ye,[t("div",ge,[t("p",{onClick:e[0]||(e[0]=l=>A(M).push("/home"))},"首页"),t("div",be,[i(a,{size:"14px",color:"#a8abb2"},{default:d(()=>[i(A(K))]),_:1})]),e[5]||(e[5]=t("p",{class:"active"},"海外资源",-1))]),t("div",xe,[e[6]||(e[6]=t("p",{class:"lable"},"国家/地区:",-1)),i(v,{filterable:"","filter-method":D,modelValue:w.value,"onUpdate:modelValue":e[1]||(e[1]=l=>w.value=l),placeholder:"请选择国家",style:{width:"240px",height:"52px"}},{default:d(()=>[(n(!0),_(f,null,V(b.value,l=>(n(),y(m,{key:l.label,label:l.label},{default:d(()=>[(n(!0),_(f,null,V(l.options,L=>(n(),y(o,{key:L.value,label:L.label,value:L.value},null,8,["label","value"]))),128))]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue"]),i(v,{multiple:"",modelValue:E.value,"onUpdate:modelValue":e[2]||(e[2]=l=>E.value=l),placeholder:"请选择类型",style:{flex:"1",height:"52px"}},{default:d(()=>[(n(!0),_(f,null,V(h.value,l=>(n(),y(o,{key:l.value,label:l.label,value:l.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),t("div",{class:"serach-btn",onClick:P}," 查一下 ")])])]),e[10]||(e[10]=t("div",{style:{height:"135px"}},null,-1)),t("div",ke,[t("div",Ce,[t("div",Ve,[t("div",Ee,[i(C,{modelValue:$.value,"onUpdate:modelValue":e[3]||(e[3]=l=>$.value=l),indeterminate:I.value,onChange:R},{default:d(()=>[ne(" 全选 "+g(k.value.length+"条"),1)]),_:1},8,["modelValue","indeterminate"]),t("p",null," 共"+g(r.value.length)+"条 ",1)]),e[7]||(e[7]=t("div",{class:"right"},null,-1))]),t("div",we,[i(W,{onEndReached:U,distance:30},{default:d(()=>[i(q,{modelValue:k.value,"onUpdate:modelValue":e[4]||(e[4]=l=>k.value=l),onChange:z},{default:d(()=>[(n(!0),_(f,null,V(r.value,l=>(n(),y(C,{key:l,value:l.id},{default:d(()=>[i(pe,{item:l},null,8,["item"])]),_:2},1032,["value"]))),128)),r.value.length===0?(n(),y(T,{key:0,description:"无数据"})):S("",!0)]),_:1},8,["modelValue"])]),_:1})]),t("div",$e,[c.value.loading&&!c.value.finished?(n(),_("div",Ie,[i(a,{color:"#999"},{default:d(()=>[i(A(Q))]),_:1}),e[8]||(e[8]=t("span",{style:{color:"#999","font-size":"14px"}},"加载中 ~",-1))])):S("",!0),!c.value.loading&&c.value.finished?(n(),_("div",Le,[...e[9]||(e[9]=[t("span",{style:{color:"#999","font-size":"14px"}},"没有更多啦 ~",-1)])])):S("",!0)])])])],64)}}},ze=N(Ae,[["__scopeId","data-v-c706afee"]]);export{ze as default};
